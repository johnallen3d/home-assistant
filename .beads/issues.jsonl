{"id":"home-assistant-045","title":"homeassistante to homebox","description":"is it possible to integrate homeassistant with homebox? capture all current devices hombox. does homeassistant have matter codes stored somewhere? would be great to capture these in homebox","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-31T13:20:13.125876-05:00","created_by":"john.allen","updated_at":"2025-12-31T18:39:35.696705-05:00","closed_at":"2025-12-31T18:39:35.696705-05:00","close_reason":"Research complete. Created ha_to_homebox.py script for syncing HA devices to Homebox. Integration works via API - no direct Matter code access in HA. Script is idempotent and can be run via 'just homebox-sync'."}
{"id":"home-assistant-04c","title":"Migrate to mise for task running and Doppler for secrets","description":"## Summary\n\nMigrate home-assistant project to mise (task runner + tool versioning) and Doppler (secrets management), following the pattern established in pi-cielo.\n\n## Current State\n\n### Task Running\n- **Justfile** (root) - main tasks with `mod esphome` and `mod config` imports\n- **esphome/Justfile** - ESPHome device management (compile, upload, logs)\n- **config/Justfile** - HA config management (extract, upload, deploy, dashboards, exposed entities)\n- Uses `set dotenv-load` to load `.envrc` variables\n\n### Secrets (plaintext, gitignored)\n- **.envrc** - direnv file with:\n  - `HOME_ASSISTANT_API_KEY` - HA long-lived access token\n  - `HA_WEBSOCKET_URL` - WebSocket URL\n  - `HA_SERVER` - SSH target (root@homeassistant)\n  - `HA_CONFIG_PATH` - Remote config path\n  - `HOMEBOX_URL` - Homebox API URL\n  - `HOMEBOX_TOKEN` - Homebox API token\n- **esphome/secrets.yaml** - ESPHome WiFi credentials (separate file)\n\n### Tool Versioning\n- **.python-version** - Python 3.12\n- **pyproject.toml** + **uv.lock** - Python deps managed by uv\n- Uses `uv run` for Python scripts\n\n## Migration Plan\n\n### Phase 1: mise Setup\n1. Create `mise.toml` with Python tool\n2. Replace `.python-version` with mise config\n3. Keep uv for package management (mise just handles Python version)\n\n### Phase 2: Migrate Justfiles to mise tasks\nStructure:\n```\nmise/tasks/\n├── sync              # config::extract wrapper\n├── homebox-sync      # homebox sync script\n├── esphome           # arg: validate|compile|upload|logs|run\n└── config            # arg: extract|upload|deploy|restart|...\n```\n\n### Phase 3: Doppler for Secrets\n\n**Key learnings from pi-cielo migration:**\n\n1. **Do NOT load secrets on shell entry** - causes 1-2s delay on every new terminal\n2. **Load secrets on-demand in tasks** using this pattern:\n   ```bash\n   # At top of task script\n   if [[ -z \"$HOME_ASSISTANT_API_KEY\" ]]; then\n       exec doppler run -- \"$0\" \"$@\"\n   fi\n   ```\n3. **mise.toml stays minimal** - no `[env]` section needed\n\n**Migration steps:**\n1. Create Doppler project (home-assistant) with prod config\n2. Add secrets to Doppler:\n   - HOME_ASSISTANT_API_KEY\n   - HOMEBOX_TOKEN  \n   - HA_SERVER, HA_CONFIG_PATH, HA_WEBSOCKET_URL, etc.\n3. Scope Doppler CLI to project: `doppler setup` in project dir\n4. Update tasks to use `doppler run` pattern above\n5. Handle esphome/secrets.yaml separately (generate from Doppler during esphome tasks)\n\n### Phase 4: Cleanup\n1. Remove .envrc (replaced by Doppler)\n2. Remove Justfile, esphome/Justfile, config/Justfile\n3. Remove .python-version\n4. Update AGENTS.md and README.md\n\n## Considerations\n\n- **ESPHome secrets.yaml**: Generate from Doppler during esphome tasks, or use `doppler secrets download --format=yaml`\n- **direnv**: No longer needed - Doppler handles secrets, mise handles tools\n- **uv integration**: Keep using uv for Python packages, mise just provides Python version\n\n## Reference\n\n- pi-cielo Doppler migration: commit `2695f71`\n- pi-cielo deploy task pattern: `mise/tasks/deploy` lines 14-17","status":"closed","priority":2,"issue_type":"feature","owner":"john@threedogconsulting.com","created_at":"2026-02-01T11:34:45.759302-05:00","created_by":"John Allen","updated_at":"2026-02-01T15:42:54.215107-05:00","closed_at":"2026-02-01T15:42:54.215107-05:00","close_reason":"Migrated to mise for task running and Doppler for secrets. All source code now in mise/tasks/ as Python scripts with PEP 723 inline dependencies."}
{"id":"home-assistant-06e","title":"move to sunrise effect in bedroom","description":"when i double-press the button in my bedroom it would be great if it could trigger the \"sunrise\" effect i see as an option in my dashboard.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-27T09:11:06.269483-05:00","updated_at":"2025-12-27T09:51:24.037549-05:00","closed_at":"2025-12-27T09:51:24.037549-05:00","close_reason":"Implemented sunrise effect on bedroom button double-press via script.bedroom_sunrise"}
{"id":"home-assistant-0e7","title":"Mobile dashboard improvements","description":"1. Move 'cook' button down to kitchen header\n2. Remove 'b's' and 'anim' buttons\n3. Change 'charlie' button to match the 'i'm eating' button style from Charlie's Shapes dashboard","status":"closed","priority":2,"issue_type":"task","owner":"john@threedogconsulting.com","created_at":"2026-01-31T14:12:29.647188-05:00","created_by":"John Allen","updated_at":"2026-01-31T14:17:05.312346-05:00","closed_at":"2026-01-31T14:17:05.312346-05:00","close_reason":"Deployed mobile dashboard with: Cook button moved to Kitchen header, B's and Anim buttons removed, Charlie button changed to toggle eating_mode"}
{"id":"home-assistant-0hm","title":"Switch to native SSH key (bypass 1Password agent)","description":"Use native SSH key instead of 1Password SSH agent to avoid biometric prompts. Add to ~/.ssh/config with IdentityAgent none, similar to pi-cielo hosts.","status":"closed","priority":3,"issue_type":"task","owner":"john@threedogconsulting.com","created_at":"2026-02-01T13:15:10.382107-05:00","created_by":"John Allen","updated_at":"2026-02-01T13:18:36.596205-05:00","closed_at":"2026-02-01T13:18:36.596205-05:00","close_reason":"Added SSH config entry for homeassistant with IdentityAgent none to bypass 1Password agent"}
{"id":"home-assistant-0q3","title":"Add SuperBOX to living room presence lighting logic","status":"closed","priority":2,"issue_type":"bug","owner":"john@threedogconsulting.com","created_at":"2026-01-25T16:12:32.318712-05:00","created_by":"John Allen","updated_at":"2026-01-25T16:12:38.39897-05:00","closed_at":"2026-01-25T16:12:38.39897-05:00","close_reason":"Added SuperBOX media player to presence lighting conditions"}
{"id":"home-assistant-14l","title":"Update Home Assistant IP address to 192.168.5.10","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-29T15:50:40.77049-05:00","updated_at":"2025-12-29T15:50:48.648475-05:00","closed_at":"2025-12-29T15:50:48.648475-05:00","close_reason":"Updated README.md with new HA IP address (192.168.0.182 → 192.168.5.10)"}
{"id":"home-assistant-16w","title":"Add air quality automations for ALPSTUGA sensor","description":"Create automations leveraging the IKEA ALPSTUGA air quality monitor in the kitchen: (1) High CO2 alert - notify at 1000ppm and 1500ppm, (2) Cooking air quality monitor - notify when air quality degrades during cooking mode and when it recovers, (3) Humidity alert - notify on \u003e65% or \u003c25% humidity, (4) PM2.5 spike alert - notify when PM2.5 exceeds 25 µg/m³.","status":"closed","priority":2,"issue_type":"feature","owner":"john@threedogconsulting.com","created_at":"2026-02-08T14:59:17.480694-05:00","created_by":"John Allen","updated_at":"2026-02-08T15:01:25.462716-05:00","closed_at":"2026-02-08T15:01:25.462716-05:00","close_reason":"Created 4 air quality automations: CO2 alert (1000/1500 ppm), cooking air quality monitor, humidity alert (\u003e65%/\u003c25%), PM2.5 spike alert (\u003e25 µg/m³). All deployed and enabled on HA."}
{"id":"home-assistant-1v3","title":"Add bathing mode with presence bypass","status":"closed","priority":2,"issue_type":"feature","owner":"john@threedogconsulting.com","created_at":"2026-01-25T15:34:47.028251-05:00","created_by":"John Allen","updated_at":"2026-01-25T15:34:51.403325-05:00","closed_at":"2026-01-25T15:34:51.403325-05:00","close_reason":"Implemented: input_boolean.bathing_mode, scene.bathing (25% brightness, 2400K), bathing_mode automation, bathroom_presence bypass, and mobile dashboard button"}
{"id":"home-assistant-24v","title":"build a charlie dashboard","description":"create a mobile friendly dasbhoard for charlie related items:\n\n- toggle presence\n- toggle sound machine\n- toggle shapes\n- shape effect chooser","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-21T13:53:26.891605-05:00","updated_at":"2025-12-21T13:57:35.365308-05:00","closed_at":"2025-12-21T13:57:35.365308-05:00","close_reason":"Created mobile-friendly Charlie dashboard with presence, sound machine, shapes toggles, and effect chooser"}
{"id":"home-assistant-2fz","title":"add a living room toggle","description":"sometimes i am workng on a project in my living room and i want to stay on even if my presence is not detected. can we add something like my \"cooking\" toggle for the living room?","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-29T12:20:38.5643-05:00","updated_at":"2025-12-29T21:15:24.478456-05:00","closed_at":"2025-12-29T21:15:24.478456-05:00","close_reason":"Implemented hobby mode toggle for living room with toggle script, automation, presence check, button mapping, and HomeKit exposure"}
{"id":"home-assistant-2n8","title":"design a baby sitter mode","description":"\nplan out a mode to make lights less automated when a sitter is visiting.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-05T11:53:21.343211-05:00","created_by":"john.allen","updated_at":"2026-01-05T11:53:21.343211-05:00"}
{"id":"home-assistant-2y1","title":"working mode","description":"i have a scene that turns on lights in my bedroom when i am working. i have recently hooked my bedroom lights up to my bathroom presence sensor so i run into this now:\n\n- hey siri, i'm working\n- bedroom lights come on (great)\n- sometime later i go to the bathroom\n- i get back to my desk\n- about 10s later my lights turn out\n\ni would like a new helper for working that avoids this issue.\n\nwhen enabled\n- turn on working scene\n- remove bedroom lights from bathroom presence\n\nwhen disabled\n- turn off bedroom lights\n- re-add bedroom lights from bathroom presence","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T13:51:35.290046-05:00","created_by":"john.allen","updated_at":"2026-01-08T13:51:43.132324-05:00","closed_at":"2026-01-08T13:51:43.132324-05:00","close_reason":"Implemented working mode helper with automation that disables bedroom-bathroom presence coupling when working"}
{"id":"home-assistant-30v","title":"offsite backups","description":"\n# Home Assistant Offsite Backups to Backblaze B2 (S3-compatible)\n\n## What we’re doing\nYou already have scheduled local HA backups. Goal is to **automatically copy those backups offsite** to **Backblaze B2**, without touching Google auth and without “AWS account” nonsense.\n\nWe’ll use an HA integration that plugs into Home Assistant’s **native backup system**, but targets **any S3-compatible provider** (including Backblaze B2). :contentReference[oaicite:0]{index=0}\n\n---\n\n## Prereqs\n- Home Assistant OS (or a Supervisor-based install) with UI access\n- A Backblaze account (you have this)\n- Optional but recommended: HACS installed (for easiest install path) :contentReference[oaicite:1]{index=1}\n\n---\n\n## Step 1 — Create a Backblaze B2 bucket + scoped key\n\n### 1) Create a bucket\nIn Backblaze B2:\n- Create a new **Bucket**\n- Keep it **Private**\n- Pick a region (whatever is closest / default for your account)\n\n### 2) Note your S3 endpoint + region\nBackblaze’s S3 endpoint format is:\n\n- `https://s3.\u003cregion\u003e.backblazeb2.com` :contentReference[oaicite:2]{index=2}\n\nExample endpoints are also shown in the HA community integration post (e.g. `https://s3.us-west-001.backblazeb2.com`). :contentReference[oaicite:3]{index=3}\n\n### 3) Create an “Application Key” for backups (recommended)\nCreate an application key limited to this bucket (principle of least privilege):\n- Save **Key ID** + **Application Key** (secret)\n- Don’t use your account’s “master” keys for HA\n\n---\n\n## Step 2 — Install “S3 Compatible Backup” in Home Assistant\n\nThis is a **custom integration** intended specifically to extend HA backups to S3-compatible storage (Backblaze B2 included). :contentReference[oaicite:4]{index=4}\n\n### Option A (recommended): Install via HACS\nFrom the integration’s instructions: :contentReference[oaicite:5]{index=5}\n1. Open **HACS → Integrations**\n2. Menu (⋮) → **Custom repositories**\n3. Add this repo URL:\n   - `https://github.com/bauer-group/IP-HomeassistantS3CompatibleBackup` :contentReference[oaicite:6]{index=6}\n4. Category: **Integration**\n5. Install\n6. **Restart Home Assistant**\n\n### Option B: Manual install (if you hate HACS)\nThe project also documents a manual `custom_components` install path. :contentReference[oaicite:7]{index=7}\n(Use this only if you’re already comfortable managing `/config/custom_components`.)\n\n---\n\n## Step 3 — Configure the integration (connect HA ↔ B2)\n\nIn Home Assistant:\n1. **Settings → Devices \u0026 Services → Add Integration**\n2. Search: **S3 Compatible Backup** :contentReference[oaicite:8]{index=8}\n3. Fill in:\n   - **Access Key ID**: (Backblaze Key ID)\n   - **Secret Access Key**: (Backblaze Application Key)\n   - **Bucket Name**: your bucket\n   - **Endpoint URL**: `https://s3.\u003cregion\u003e.backblazeb2.com` :contentReference[oaicite:9]{index=9}\n   - **Region**: the region string (the `\u003cregion\u003e` part)\n   - **Prefix** (optional): default is fine (`homeassistant`) :contentReference[oaicite:10]{index=10}\n\nResult: your backups land in a predictable folder structure in the bucket (prefix/backups + metadata). :contentReference[oaicite:11]{index=11}\n\n---\n\n## Step 4 — Make sure HA backups are configured the way you want\n\nHome Assistant’s backup system supports automatic backups from the UI, and the backup action `backup.create_automatic` uses those settings. :contentReference[oaicite:12]{index=12}\n\nIn HA:\n- **Settings → System → Backups → Backup settings**\n  - Set schedule (daily/weekly)\n  - Set retention (e.g., keep last 30)\n  - **Set a backup password/encryption** if you want “cloud bucket = safe even if leaked”\n\n\u003e Tip: For offsite, “encrypted backups” is worth it.\n\n---\n\n## Step 5 — Validate it end-to-end (don’t skip)\n1. Trigger a manual backup (from the Backups UI)\n2. Wait for upload\n3. Confirm you see new objects in B2\n4. Download one backup locally and keep it as your “known good” snapshot\n\n---\n\n## Step 6 — Monitoring / failure alerts (recommended)\nHA exposes an event entity for automatic backup status and provides an example automation to notify on failures. :contentReference[oaicite:13]{index=13}\n\nIf you want, we can wire an iOS push notification when automatic backup fails using:\n- `event.backup_automatic_backup` and its `failed_reason` attribute :contentReference[oaicite:14]{index=14}\n\n---\n\n## Cost expectations (B2 is basically free at HA scale)\nBackblaze B2 pricing is typically:\n- ~$0.005/GB-month storage\n- First 10GB storage free (common on B2 pricing pages / posts) :contentReference[oaicite:15]{index=15}\n\nAt “HA backup” sizes, you’re usually talking **cents/month**, not dollars.\n\n---\n\n## Quick checklist\n- [ ] B2 bucket created (private)\n- [ ] Scoped application key created + stored safely\n- [ ] S3 Compatible Backup integration installed (HACS or manual)\n- [ ] Integration configured with correct endpoint + region\n- [ ] HA automatic backups configured + retention set\n- [ ] One manual backup verified in B2\n- [ ] (Optional) Backup failure notification automation added\n\n---\n","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-29T15:52:38.835433-05:00","updated_at":"2025-12-29T16:23:14.873858-05:00","closed_at":"2025-12-29T16:23:14.873858-05:00","close_reason":"Completed: S3 Compatible Backup integration installed, configured with Backblaze B2, test backup verified in bucket, failure notification automation created"}
{"id":"home-assistant-367","title":"Add cleaning mode with full-brightness lighting","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-06T09:48:07.175796-05:00","created_by":"john.allen","updated_at":"2026-01-06T09:48:22.238743-05:00","closed_at":"2026-01-06T09:48:22.238743-05:00","close_reason":"Implemented cleaning mode feature:\n\n**What it does:**\n- Toggle (input_boolean.cleaning_mode) activates cleaning mode\n- Turns on all lights at 100% brightness, 6500K (full white)\n- Turns on kitchen counter switch\n- Disables presence/motion automations (bathroom, kitchen, living room, charlie meal, bedroom-bathroom)\n- Turns off conflicting modes (hobby, cooking, eating, meditation)\n- Excludes laundry room per user preference\n\n**Key implementation details:**\n- Disables mode automations BEFORE turning off modes to prevent race conditions\n- Re-enables all automations when cleaning mode is turned off\n- Added 'Clean' toggle to mobile dashboard (removed unused Morning/TV/Wind Down buttons)\n\n**Files changed:**\n- config/configuration.yaml - added input_boolean.cleaning_mode\n- config/automations/cleaning_mode.yaml - new automation\n- config/.storage/lovelace.dashboard_bubbles - dashboard updates"}
{"id":"home-assistant-42p","title":"Fix Backblaze B2 backup retention - old backups not being cleaned up, quota exceeded","description":"## Problem\n\nBackblaze B2 offsite backups are accumulating without cleanup, causing the B2 storage quota to be exceeded. As of Feb 7 2026, daily automatic backups are failing with `upload_failed` (likely quota full).\n\n## Current Setup\n\n- **Integration**: S3 Compatible Backup (HACS) by Bauer Group (`bauergroup_s3compatiblebackup`)\n- **Bucket**: `homeassistant-backups-cielo` on Backblaze B2\n- **Credentials**: Stored in Doppler (scoped application key with s3:DeleteObject permission)\n- **Schedule**: Daily automatic backups (~10:30 AM ET)\n- **Backup locations**: NAS (NFS mount, primary) + B2 (offsite)\n\n## Failure Timeline\n\n| Date | Status |\n|------|--------|\n| Feb 1-4 | Backups completing successfully |\n| Feb 5 | Failed (scheduled), then succeeded (retry at 5:20 PM) |\n| Feb 6 | Last successful backup (10:43 AM) |\n| Feb 7 | FAILED with `upload_failed` |\n| Feb 8 | FAILED with `upload_failed` |\n\nCurrent state: `event.backup_automatic_backup` shows `failed_reason: upload_failed`\n\n## Root Cause Analysis\n\n1. **HA retention not cleaning remote**: HA 2025.5 added per-location retention settings, but this may not be configured for the S3 backup agent, OR the S3 Compatible Backup integration may not properly participate in HA's retention lifecycle\n2. **Integration has delete capability**: The Bauer Group integration implements `async_delete_backup` on its `BackupAgent`, so HA *can* request deletion - it just may not be doing so\n3. **No B2-side lifecycle rules**: No Backblaze B2 bucket lifecycle rules are configured to auto-delete old files as a safety net\n4. **Backups accumulate**: Each daily backup is ~1-2 GB compressed. Over weeks/months without cleanup, this exceeds the B2 free tier (10 GB) or configured quota\n\n## Resolution Steps\n\n### Immediate (unblock backups)\n- [ ] Log into Backblaze B2 console and check current bucket usage\n- [ ] Manually delete old backups from the bucket, keeping only the most recent 3-5\n- [ ] Verify next automatic backup succeeds\n\n### Configure HA Retention for B2 Location\n- [ ] Go to HA Settings \u003e System \u003e Backups \u003e Backup settings\n- [ ] Check if per-location retention is configured for the S3 backup agent\n- [ ] Set retention to \"keep last 3\" (or similar) for the B2 location\n- [ ] Verify HA actually calls `async_delete_backup` on the agent after the next backup\n\n### Add B2 Lifecycle Rules (safety net)\n- [ ] Configure Backblaze B2 bucket lifecycle rule: \"Delete files older than 14 days\"\n- [ ] This acts as a fallback if HA retention doesn't work properly\n- [ ] Note: B2 lifecycle rules have a ~48 hour enforcement delay\n\n### Consider Native Integration (optional)\n- [ ] HA 2025.12 added a native `backblaze_b2` integration\n- [ ] This may handle retention more reliably than the HACS S3 Compatible Backup\n- [ ] Evaluate switching: would need to reconfigure, but benefits from core HA maintenance\n- [ ] Native integration page: https://www.home-assistant.io/integrations/backblaze_b2/\n\n## References\n\n- S3 Compatible Backup: https://github.com/bauer-group/IP-HomeassistantS3CompatibleBackup\n- HA backup retention per-location: added in HA 2025.5\n- Backblaze B2 lifecycle rules: https://www.backblaze.com/docs/cloud-storage-lifecycle-rules\n- Community discussion on S3 retention: https://community.home-assistant.io/t/gfs-style-retention-for-home-assistant-backups-on-s3/974054","notes":"Root Cause: B2 bucket versioning preserved deleted backups as non-current versions (9.2 GB of old versions + delete markers). HA retention WAS working (delete markers prove it), but versioning kept the data. Resolution: Purged 56 objects (28 old versions + 28 delete markers), added lifecycle rule to expire non-current versions after 1 day. Bucket now at 685 MB (1 backup). Next step: verify tomorrow backup succeeds.","status":"closed","priority":1,"issue_type":"bug","owner":"john@threedogconsulting.com","created_at":"2026-02-08T15:31:49.382262-05:00","created_by":"John Allen","updated_at":"2026-02-08T15:47:25.119522-05:00","closed_at":"2026-02-08T15:47:25.119522-05:00","close_reason":"Fixed: Purged 9.2 GB of non-current B2 versions, added lifecycle rule to auto-expire old versions after 1 day"}
{"id":"home-assistant-4bp","title":"kitchen button single press not working","description":"the kitchen button sigle press should toggle the cooking helper but it is not. as far as i can tell it is currently not doing anything","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-21T12:20:40.618332-05:00","updated_at":"2025-12-21T13:40:37.551788-05:00","closed_at":"2025-12-21T13:40:37.551788-05:00","close_reason":"Closed"}
{"id":"home-assistant-4f5","title":"Nuki lock not in HomeKit","description":"Investigate why the Nuki lock is not showing up in the Home app","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-19T17:04:51.464385-05:00","updated_at":"2025-12-22T09:55:49.524386-05:00","closed_at":"2025-12-22T09:55:49.524386-05:00","close_reason":"Resolved: Nuki lock added to HomeKit via Matter fabric sharing. Removed lock domain from homekit_exposed.yaml since locks require accessory mode (not bridge mode) and Matter provides direct native access."}
{"id":"home-assistant-4o9","title":"cook mode overnight","description":"twice overnight cook mode was enabled. i woke up at about 3:30 am and toggled it off via the button. when i woke up around 8am it was toggled on again. inestigate the logs to identify the issue","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-02T08:55:06.884256-05:00","created_by":"john.allen","updated_at":"2026-01-02T08:59:53.754338-05:00","comments":[{"id":2,"issue_id":"home-assistant-4o9","author":"john.allen","text":"## Investigation Findings (2026-01-02)\n\n### Timeline of overnight cook mode toggles\n| Time (ET) | Event |\n|-----------|-------|\n| 6:14 PM Jan 1 | Cook mode OFF (last normal use) |\n| 3:17 AM Jan 2 | Kitchen button (Matter) went **unavailable** |\n| 3:43 AM Jan 2 | Kitchen button came back → cook mode turned ON |\n| 3:50 AM Jan 2 | User turned it OFF via button |\n| 4:51 AM Jan 2 | Kitchen button went **unavailable** again |\n| 6:42 AM Jan 2 | Kitchen button came back → cook mode turned ON |\n\n### Root cause\nWhen Matter buttons reconnect after being unavailable, HA fires a state change event. The `automation.kitchen_button` triggers on any state change to `event.smart_button_button`. The `event_type` attribute retains its last value (`multi_press_1`), so the automation runs `script.toggle_cooking`.\n\n### Broader context - Matter network instability\nMultiple Matter devices went unavailable overnight (2-4 AM ET):\n- 2:01 AM - beltalowda-net (network equipment)\n- 2:03 AM - Roborock vacuum\n- 2:05 AM - Ember mug\n- 3:17 AM - Kitchen button (Matter)\n- 4:01 AM - Bathroom Lamp (Matter)\n- 4:02 AM - Living Room Overhead Thread\n- 4:05 AM - Kitchen counter switch (Matter)\n- 4:08 AM - Bedroom button (Matter)\n\nBoth Matter buttons went unavailable. The bedroom button automation also triggered on reconnect but didn't cause visible issues.\n\n### Open questions\n1. Why did Matter devices start going unavailable overnight? This is new behavior.\n2. Possible causes: HomePod Mini (Thread border router) firmware update, Apple Home changes, WiFi/Thread interference\n\n### Potential fix (not applied)\nAdd condition to button automations to ignore state changes from unavailable:\n```yaml\nconditions:\n  - condition: template\n    value_template: \"{{ trigger.from_state.state not in ['unavailable', 'unknown'] }}\"\n```\n\n### Status\nLeaving open to monitor. Will revisit if issue recurs.\n","created_at":"2026-01-02T14:22:57Z"}]}
{"id":"home-assistant-5if","title":"create clean charlies room automation","description":"if possible create a script that will tell the roborock to clean charlies room, bathroom and closet. add it to the charlie dashboard","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T09:59:13.843115-05:00","updated_at":"2025-12-22T10:03:56.512965-05:00","closed_at":"2025-12-22T10:03:56.512965-05:00","close_reason":"Created script.clean_charlies_room to vacuum Charlie's bedroom (segment 21), bathroom (segment 20), and closet (segment 18). Added 'Clean Room' tile to Charlie dashboard Quick Controls section."}
{"id":"home-assistant-5ld","title":"Explore centralized mode manager (Option C)","description":"## Context\n\nIn home-assistant-byu we chose Option A (scripts explicitly clear conflicting modes) for handling stale mode state.\n\nThis issue explores Option C as a potential future improvement.\n\n## Option C: Centralized Mode Manager\n\nA single automation that watches all light state changes and clears stale modes.\n\n### Concept\n\n```yaml\nalias: \"Mode State Manager\"\ntriggers:\n  - trigger: state\n    entity_id:\n      - light.living_room_lights\n      - light.kitchen_lights\n      - light.bedroom_lights\n      - light.bathroom_lights\n    to: \"off\"\n\nactions:\n  # When living room lights turn off, clear living room modes\n  - if:\n      - condition: state\n        entity_id: light.living_room_lights\n        state: \"off\"\n    then:\n      - action: input_boolean.turn_off\n        target:\n          entity_id:\n            - input_boolean.hobby_mode\n            - input_boolean.dad_eating_mode\n  # ... similar for other areas\n```\n\n### Pros\n- Single source of truth for mode cleanup\n- New scripts don't need to know about modes\n- Less duplication across automations\n\n### Cons\n- May clear modes unexpectedly (manual light off?)\n- Complex conditional logic\n- Harder to debug\n\n### Questions to Explore\n1. Should it only trigger on \"external\" light changes (not from mode automations)?\n2. How to distinguish intentional light-off from mode cleanup vs user turning off lights?\n3. Would a short delay help avoid race conditions?\n\n## Related\n- Depends on: home-assistant-byu (mode matrix implementation)","status":"open","priority":3,"issue_type":"task","owner":"john@threedogconsulting.com","created_at":"2026-02-08T10:42:18.161108-05:00","created_by":"John Allen","updated_at":"2026-02-08T10:42:18.161108-05:00","dependencies":[{"issue_id":"home-assistant-5ld","depends_on_id":"home-assistant-byu","type":"blocks","created_at":"2026-02-08T10:42:22.592066-05:00","created_by":"John Allen"}]}
{"id":"home-assistant-5x0","title":"shapes watchdog","description":"add an automation that periodically checks on the shapes, if charlie is not present (helper) then make sure they are off","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-21T11:38:16.04704-05:00","updated_at":"2025-12-21T11:39:09.690741-05:00","closed_at":"2025-12-21T11:39:09.690741-05:00","close_reason":"Created watchdog automation that turns off shapes when they come on while Charlie is away"}
{"id":"home-assistant-6hh","title":"Normalize scripts into src/ folder structure","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T18:39:34.880875-05:00","created_by":"john.allen","updated_at":"2025-12-31T20:10:02.083967-05:00","closed_at":"2025-12-31T20:10:02.083967-05:00","close_reason":"Completed: Reorganized scripts into src/ folder structure with proper Python packages","comments":[{"id":1,"issue_id":"home-assistant-6hh","author":"john.allen","text":"## Implementation Plan\n\n### Target Structure\nsrc/automation/{__init__.py, update.py}\nsrc/scene/{__init__.py, update.py, delete.py}\nsrc/exposure/{__init__.py, voice.py, homekit.py}\nsrc/config/extract.sh\nsrc/integrations/{__init__.py, homebox_sync.py}\n\n### Tasks\n1. Create directory structure with __init__.py files\n2. Move/rename: update_automation.py → src/automation/update.py\n3. Move/rename: update_scene.py → src/scene/update.py\n4. Move/rename: delete_scene.py → src/scene/delete.py\n5. Move/rename: update_exposed_entities.py → src/exposure/voice.py\n6. Move/rename: update_homekit_entities.py → src/exposure/homekit.py\n7. Move/rename: config/extract.sh → src/config/extract.sh\n8. Move/rename: scripts/ha_to_homebox.py → src/integrations/homebox_sync.py\n9. Update config/Justfile paths\n10. Update root Justfile paths\n11. Remove empty scripts/ directory and old root files\n12. Update AGENTS.md documentation","created_at":"2026-01-01T01:03:46Z"}]}
{"id":"home-assistant-8go","title":"add \"working\" button to dashboard","description":"on both mobile and desktop dashboards add a button to turn on the working scene. it shoule be aligned with dads bedroom","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T13:51:17.644535-05:00","updated_at":"2025-12-22T13:58:43.866757-05:00","closed_at":"2025-12-22T13:58:43.866757-05:00","close_reason":"Added Working button to both desktop and mobile dashboards, deployed to HA"}
{"id":"home-assistant-8zu","title":"charlie shapes toggle","description":"there is an off button on charrlies shapes dashboard. i want this to be a toggle instead","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-02T08:53:46.082028-05:00","created_by":"john.allen","updated_at":"2026-01-02T08:55:13.8496-05:00","closed_at":"2026-01-02T08:55:13.8496-05:00","close_reason":"Changed off button to toggle button using light.toggle service"}
{"id":"home-assistant-9ik","title":"migrate vac schedule","description":"migrate schedule from roborock into home assistant for more control and smarts (e.g. presence)","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-01T10:34:36.8056-05:00","created_by":"john.allen","updated_at":"2026-01-03T10:39:21.172077-05:00","closed_at":"2026-01-03T10:39:21.172077-05:00","close_reason":"Implemented scheduled vacuum automation with presence detection. Schedule: Mon/Thu all rooms, Tue/Wed/Fri non-Charlie rooms. Triggers 8am-6pm when nobody home. Includes iPhone notification before starting."}
{"id":"home-assistant-9mx","title":"Fix living room lights turning on when TV reports unknown state","description":"Apple TV frequently reports 'unknown' state which was included in the 'TV off' check, causing lights to turn on during TV viewing","status":"closed","priority":1,"issue_type":"bug","owner":"john@threedogconsulting.com","created_at":"2026-01-25T15:39:13.713091-05:00","created_by":"John Allen","updated_at":"2026-01-25T15:49:58.072426-05:00","closed_at":"2026-01-25T15:49:58.072426-05:00","close_reason":"Now checks both Apple TV and LG TV states before turning on lights"}
{"id":"home-assistant-aiy","title":"add dads lights to charlies shapes dashboard","description":"\nchange charlies shapes dashboard to be more general purpose\n\n- add simple controls for dad's bedroom\n    - toggle all on/off\n    - color selections for all\n- add an i'm eating toggle\n    - new helper/mode for charlies eating\n    - forces island light on when enabled\n    - set brightness to 80%\n    - set color a warm but still illuminating yellow/white\n","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-03T11:18:27.275718-05:00","created_by":"john.allen","updated_at":"2026-01-03T12:49:00.105548-05:00","closed_at":"2026-01-03T12:49:00.105548-05:00","close_reason":"Implemented eating mode with dashboard controls, presence protection, and 60s auto-timeout"}
{"id":"home-assistant-ajy","title":"air purifier automation","description":"automate airversa.\n1. turn off when i leave\n2. when i return\n    1. turn on\n    2. set to manual\n    3. run purge (max fan for 15 min)\n    4. switch back to auto\n3. have some sort of debounce; do not run purge more than once in a 12 hr period\n","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-21T11:44:13.266386-05:00","updated_at":"2025-12-21T12:00:00.445292-05:00","closed_at":"2025-12-21T12:00:00.445292-05:00","close_reason":"Implemented Airversa automation: departure turns off purifier, arrival turns on + runs 15-min purge cycle (with 12-hour debounce)"}
{"id":"home-assistant-bnr","title":"Meditation mode should turn off cooking mode","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-03T08:39:55.679496-05:00","created_by":"john.allen","updated_at":"2026-01-03T08:40:01.70066-05:00","closed_at":"2026-01-03T08:40:01.70066-05:00","close_reason":"Added input_boolean.turn_off for cooking_mode in toggle_meditation script sequence"}
{"id":"home-assistant-byu","title":"Mode helper state conflict resolution","description":"## Problem\nMode helpers can get into conflicting states. Example scenario:\n- dad_eating_mode is ON\n- User triggers sleeping/meditation mode\n- All lights go out\n- dad_eating_mode remains ON (stale state)\n\nWhen the user wakes up or exits meditation, the stale eating mode may cause unexpected behavior.\n\n## Mode Helpers Catalog\n\n| Mode | Entity | Primary Area | Purpose |\n|------|--------|--------------|---------|\n| Cooking | `input_boolean.cooking_mode` | Kitchen | Bright task lighting for cooking |\n| Hobby | `input_boolean.hobby_mode` | Living room | Focused task lighting |\n| Eating | `input_boolean.eating_mode` | Kitchen island | Charlie's meal lighting |\n| Dad Eating | `input_boolean.dad_eating_mode` | Living room | Dad's meal ambiance |\n| Meditation | `input_boolean.meditation_mode` | Whole home | All lights off |\n| Working | `input_boolean.working_mode` | Bedroom | Task lighting for work |\n| Bathing | `input_boolean.bathing_mode` | Bathroom | Warm dim bath lighting |\n| Cleaning | `input_boolean.cleaning_mode` | Whole home | 100% brightness everywhere |\n\n## Current Bypass Matrix\n\nWhich modes protect against which presence automations:\n\n| Presence Automation | Bypassed By |\n|---------------------|-------------|\n| kitchen_presence_lighting | cooking_mode, eating_mode |\n| living_room_presence_lighting | hobby_mode, eating_mode, dad_eating_mode, TV in use |\n| bathroom_presence | bathing_mode |\n| bedroom_bathroom_presence | working_mode |\n\n## TV Time Script Protection\n\n`script.tv_time` skips living room light dimming when:\n- `dad_eating_mode` is ON\n- `eating_mode` is ON (kitchen lights only)\n\n## Current Inter-Mode Relationships\n\n1. **Cleaning mode** - Most aggressive, disables ALL other modes and automations\n2. **Meditation mode** - Turns off cooking_mode, disables living room presence automation\n3. **Others** - No explicit inter-mode coordination\n\n## State Conflict Scenarios to Resolve\n\n1. **Eating + Sleep/Meditation**: Eating mode stays on after lights-out\n2. **Hobby + TV Time**: What happens if TV turns on during hobby mode?\n3. **Multiple meals**: Can eating_mode and dad_eating_mode both be on?\n4. **Working + presence**: Bathroom visit during working mode\n\n## Desired Behavior Matrix (TO BE DEFINED)\n\nNeed to define what should happen when each mode transitions while another is active:\n\n```\n              | cooking | hobby | eating | dad_eat | meditate | working | bathing | cleaning\n--------------+---------+-------+--------+---------+----------+---------+---------+---------\ncooking ON    |    -    |   ?   |   ?    |    ?    |    ?     |    ?    |    ?    |  off\nhobby ON      |    ?    |   -   |   ?    |    ?    |    ?     |    ?    |    ?    |  off\neating ON     |    ?    |   ?   |   -    |    ?    |    ?     |    ?    |    ?    |  off\ndad_eat ON    |    ?    |   ?   |   ?    |    -    |    ?     |    ?    |    ?    |  off\nmeditate ON   |   off   |   ?   |   ?    |    ?    |    -     |    ?    |    ?    |    ?\nworking ON    |    ?    |   ?   |   ?    |    ?    |    ?     |    -    |    ?    |  off\nbathing ON    |    ?    |   ?   |   ?    |    ?    |    ?     |    ?    |    -    |  off\ncleaning ON   |   off   |  off  |  off   |   off   |   off    |   off   |   off   |    -\n```\n\nLegend: ? = needs decision, off = turns off, - = same mode\n\n## Related Files\n\n**Automations:**\n- config/automations/cooking_mode.yaml\n- config/automations/hobby_mode.yaml\n- config/automations/eating_mode.yaml\n- config/automations/dad_eating_mode.yaml\n- config/automations/working_mode.yaml\n- config/automations/bathing_mode.yaml\n- config/automations/cleaning_mode.yaml\n\n**Scripts:**\n- config/scripts.yaml (toggle_meditation, eating, tv_time, lights)\n\n**Helpers defined in:**\n- config/configuration.yaml (input_boolean section)","notes":"## Decisions Made\n\n1. **Rename** `eating_mode` → `charlie_eating_mode`\n\n2. **Add** `input_boolean.tv_mode` as explicit helper\n   - Automation sets it ON when media player starts playing\n   - Automation sets it OFF when media player stops\n   - Visible on dashboard\n   - Can be manually overridden\n\n3. **Stale mode handling**: Option A - scripts explicitly turn off conflicting modes\n\n## Final Mode Matrix\n\n```\nWhen X turns ON     | cooking | hobby | charlie | dad_eat | meditate | working | bathing | tv    | cleaning\n--------------------+---------+-------+---------+---------+----------+---------+---------+-------+---------\ncooking ON          |    -    |   ·   |    ·    |    ·    |   OFF    |    ·    |   OFF   |   ·   |   OFF\nhobby ON            |    ·    |   -   |    ·    |   OFF   |   OFF    |    ·    |   OFF   |   ·   |   OFF\ncharlie_eating ON   |    ·    |   ·   |    -    |    ·    |    ·     |    ·    |    ·    |   ·   |   OFF\ndad_eating ON       |   OFF   |  OFF  |    ·    |    -    |   OFF    |   OFF   |   OFF   |   ·   |   OFF\nmeditation ON       |   OFF   |  OFF  |    ·    |   OFF   |    -     |   OFF   |   OFF   |  OFF  |   OFF\nworking ON          |   OFF   |  OFF  |    ·    |   OFF   |   OFF    |    -    |   OFF   |   ·   |   OFF\nbathing ON          |   OFF   |  OFF  |    ·    |   OFF   |   OFF    |   OFF   |    -    |   ·   |   OFF\ntv ON               |    ·    |  OFF  |    ·    |    ·    |   OFF    |    ·    |    ·    |   -   |   OFF\ncleaning ON         |   OFF   |  OFF  |   OFF   |   OFF   |   OFF    |   OFF   |   OFF   |  OFF  |    -\n```\n\n## Files to Change\n\n### Renames\n- `input_boolean.eating_mode` → `input_boolean.charlie_eating_mode`\n- Update all references in automations, scripts, dashboards\n\n### New Helper\n- Add `input_boolean.tv_mode` to configuration.yaml\n\n### New Automation\n- `config/automations/tv_mode.yaml` - sets tv_mode based on media player state\n\n### Script Updates (Option A - explicit mode clearing)\n\n**tv_time script** - before changing lights, turn off:\n- hobby_mode (living room conflict)\n\n**meditation script** - turn off all modes:\n- cooking_mode, hobby_mode, dad_eating_mode, working_mode, bathing_mode, tv_mode\n\n**Each mode automation** - when turning ON, turn off modes per matrix above","status":"closed","priority":2,"issue_type":"task","owner":"john@threedogconsulting.com","created_at":"2026-02-08T09:50:41.250898-05:00","created_by":"John Allen","updated_at":"2026-02-08T11:34:42.009284-05:00","closed_at":"2026-02-08T11:34:42.009284-05:00","close_reason":"Implemented mode conflict matrix with disable/re-enable pattern"}
{"id":"home-assistant-c4p","title":"respect presence in kitchen","description":"currently if i toggle of cooking all of the kitchen lights go out, even if i'm resent in the space. both kitchen and charlie meal zones should be considered whe the lights are toggled out.\n","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-21T08:38:45.916911-05:00","updated_at":"2025-12-21T11:12:17.644479-05:00","closed_at":"2025-12-21T11:12:17.644479-05:00","close_reason":"Implemented proper state-based cooking mode with presence-aware light control"}
{"id":"home-assistant-c6p","title":"TV mode should not override cooking, charlie eating, or dad eating modes","description":"When the TV turns on, script.tv_time modifies kitchen lights even when cooking_mode is active. The script already checks charlie_eating_mode and dad_eating_mode but not cooking_mode. Fix: add cooking_mode check to skip kitchen light modifications in tv_time script.","status":"closed","priority":2,"issue_type":"bug","owner":"john@threedogconsulting.com","created_at":"2026-02-14T16:28:24.325972-05:00","created_by":"John Allen","updated_at":"2026-02-14T16:30:59.784645-05:00","closed_at":"2026-02-14T16:30:59.784645-05:00","close_reason":"Added cooking_mode protection to script.tv_time - kitchen lights now protected when cooking, charlie eating, or dad eating modes are active"}
{"id":"home-assistant-cgq","title":"lock down","description":"\ni want to implement or edit my \"lock down\"\n\n- long press bedside button\n- turn off all of the lights\n- turn on \"alarm\" (no longer time based)\n- double-press bedside button in the morning\n- turns on sunrise effect (current)\n- disables \"alarm\"\n","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-28T11:28:23.750798-05:00","updated_at":"2025-12-28T11:36:44.79067-05:00","closed_at":"2025-12-28T11:36:44.79067-05:00","close_reason":"Implemented toggle-based alarm: long-press enables, double-press disables"}
{"id":"home-assistant-cue","title":"bathroom/kitchen lights not turning off","description":"as of this afternoon, when i exit the bathroom and kitchen the lights are not turning off. laundry room works fine.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-28T17:08:11.382002-05:00","updated_at":"2025-12-28T17:33:08.485908-05:00","closed_at":"2025-12-28T17:33:08.485908-05:00","close_reason":"Kitchen: cooking_mode was stuck ON. Bathroom: sensor hold time was 10s (reduced to 1s via HA UI). Total delay now ~6s."}
{"id":"home-assistant-dao","title":"fix vac schedule","description":"something is wrong with the automation implemented in ddbe974. the vac ran after i left this morning which is great. however it has just started up again. we seem to be missing logic about it only running \"once a day\"","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-05T10:32:01.045719-05:00","created_by":"john.allen","updated_at":"2026-01-05T10:36:54.767354-05:00","closed_at":"2026-01-05T10:36:54.767354-05:00","close_reason":"Added condition to check last_triggered date - automation now only runs once per day"}
{"id":"home-assistant-dhu","title":"Fix living room lighting to use Apple TV entity instead of LG TV","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-31T13:19:25.464041-05:00","created_by":"john.allen","updated_at":"2025-12-31T13:20:08.452293-05:00","closed_at":"2025-12-31T13:20:08.452293-05:00","close_reason":"Fixed by switching from unreliable LG TV entity (media_player.lg_webos_tv_oled65c3aua) to Apple TV (media_player.living_room). LG TV was unplugged from network on Dec 28 and showed only unavailable/off states. Updated both living_room_presence_lighting and tv_time automations."}
{"id":"home-assistant-dlh","title":"Fix kitchen button ghost presses on Thread reconnect","description":"Kitchen button (event.smart_button_button) fires stale events when reconnecting after Thread disconnection. The existing not_from/not_to unavailable filters (added in edfa2f5) don't catch all reconnect paths for event entities. Fix: add a staleness condition that compares the event entity's state timestamp to now() and rejects events older than ~5 seconds.","status":"closed","priority":1,"issue_type":"bug","owner":"john@threedogconsulting.com","created_at":"2026-02-14T17:02:20.97131-05:00","created_by":"John Allen","updated_at":"2026-02-14T17:03:10.579539-05:00","closed_at":"2026-02-14T17:03:10.579539-05:00","close_reason":"Added staleness check (last_updated \u003c 5s) to kitchen button and bedroom button automations. Also added missing not_from/not_to unavailable filters to bedroom button."}
{"id":"home-assistant-dmm","title":"team tracker notification timing","description":"i have a \"game starting\" notification but the timing is way off... like 24 hours. can you look into this?","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-29T17:20:48.948456-05:00","updated_at":"2026-01-03T10:05:03.008195-05:00","closed_at":"2026-01-03T10:05:03.008195-05:00","close_reason":"Changed to time-pattern trigger (every 5 min) with 60-65 min window. Fixed time display to show local time instead of UTC."}
{"id":"home-assistant-dw1","title":"airversa filter notification","description":"add a notification when the filter for the airversa drops below 10% lifetime","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-21T11:17:57.466702-05:00","updated_at":"2025-12-21T11:27:03.904939-05:00","closed_at":"2025-12-21T11:27:03.904939-05:00","close_reason":"Created automation that notifies when Airversa filter drops below 10%"}
{"id":"home-assistant-f4l","title":"offsite backups","description":"\n# Home Assistant Offsite Backups to Backblaze B2 (S3-compatible)\n\n## What we’re doing\nYou already have scheduled local HA backups. Goal is to **automatically copy those backups offsite** to **Backblaze B2**, without touching Google auth and without “AWS account” nonsense.\n\nWe’ll use an HA integration that plugs into Home Assistant’s **native backup system**, but targets **any S3-compatible provider** (including Backblaze B2). :contentReference[oaicite:0]{index=0}\n\n---\n\n## Prereqs\n- Home Assistant OS (or a Supervisor-based install) with UI access\n- A Backblaze account (you have this)\n- Optional but recommended: HACS installed (for easiest install path) :contentReference[oaicite:1]{index=1}\n\n---\n\n## Step 1 — Create a Backblaze B2 bucket + scoped key\n\n### 1) Create a bucket\nIn Backblaze B2:\n- Create a new **Bucket**\n- Keep it **Private**\n- Pick a region (whatever is closest / default for your account)\n\n### 2) Note your S3 endpoint + region\nBackblaze’s S3 endpoint format is:\n\n- `https://s3.\u003cregion\u003e.backblazeb2.com` :contentReference[oaicite:2]{index=2}\n\nExample endpoints are also shown in the HA community integration post (e.g. `https://s3.us-west-001.backblazeb2.com`). :contentReference[oaicite:3]{index=3}\n\n### 3) Create an “Application Key” for backups (recommended)\nCreate an application key limited to this bucket (principle of least privilege):\n- Save **Key ID** + **Application Key** (secret)\n- Don’t use your account’s “master” keys for HA\n\n---\n\n## Step 2 — Install “S3 Compatible Backup” in Home Assistant\n\nThis is a **custom integration** intended specifically to extend HA backups to S3-compatible storage (Backblaze B2 included). :contentReference[oaicite:4]{index=4}\n\n### Option A (recommended): Install via HACS\nFrom the integration’s instructions: :contentReference[oaicite:5]{index=5}\n1. Open **HACS → Integrations**\n2. Menu (⋮) → **Custom repositories**\n3. Add this repo URL:\n   - `https://github.com/bauer-group/IP-HomeassistantS3CompatibleBackup` :contentReference[oaicite:6]{index=6}\n4. Category: **Integration**\n5. Install\n6. **Restart Home Assistant**\n\n### Option B: Manual install (if you hate HACS)\nThe project also documents a manual `custom_components` install path. :contentReference[oaicite:7]{index=7}\n(Use this only if you’re already comfortable managing `/config/custom_components`.)\n\n---\n\n## Step 3 — Configure the integration (connect HA ↔ B2)\n\nIn Home Assistant:\n1. **Settings → Devices \u0026 Services → Add Integration**\n2. Search: **S3 Compatible Backup** :contentReference[oaicite:8]{index=8}\n3. Fill in:\n   - **Access Key ID**: (Backblaze Key ID)\n   - **Secret Access Key**: (Backblaze Application Key)\n   - **Bucket Name**: your bucket\n   - **Endpoint URL**: `https://s3.\u003cregion\u003e.backblazeb2.com` :contentReference[oaicite:9]{index=9}\n   - **Region**: the region string (the `\u003cregion\u003e` part)\n   - **Prefix** (optional): default is fine (`homeassistant`) :contentReference[oaicite:10]{index=10}\n\nResult: your backups land in a predictable folder structure in the bucket (prefix/backups + metadata). :contentReference[oaicite:11]{index=11}\n\n---\n\n## Step 4 — Make sure HA backups are configured the way you want\n\nHome Assistant’s backup system supports automatic backups from the UI, and the backup action `backup.create_automatic` uses those settings. :contentReference[oaicite:12]{index=12}\n\nIn HA:\n- **Settings → System → Backups → Backup settings**\n  - Set schedule (daily/weekly)\n  - Set retention (e.g., keep last 30)\n  - **Set a backup password/encryption** if you want “cloud bucket = safe even if leaked”\n\n\u003e Tip: For offsite, “encrypted backups” is worth it.\n\n---\n\n## Step 5 — Validate it end-to-end (don’t skip)\n1. Trigger a manual backup (from the Backups UI)\n2. Wait for upload\n3. Confirm you see new objects in B2\n4. Download one backup locally and keep it as your “known good” snapshot\n\n---\n\n## Step 6 — Monitoring / failure alerts (recommended)\nHA exposes an event entity for automatic backup status and provides an example automation to notify on failures. :contentReference[oaicite:13]{index=13}\n\nIf you want, we can wire an iOS push notification when automatic backup fails using:\n- `event.backup_automatic_backup` and its `failed_reason` attribute :contentReference[oaicite:14]{index=14}\n\n---\n\n## Cost expectations (B2 is basically free at HA scale)\nBackblaze B2 pricing is typically:\n- ~$0.005/GB-month storage\n- First 10GB storage free (common on B2 pricing pages / posts) :contentReference[oaicite:15]{index=15}\n\nAt “HA backup” sizes, you’re usually talking **cents/month**, not dollars.\n\n---\n\n## Quick checklist\n- [ ] B2 bucket created (private)\n- [ ] Scoped application key created + stored safely\n- [ ] S3 Compatible Backup integration installed (HACS or manual)\n- [ ] Integration configured with correct endpoint + region\n- [ ] HA automatic backups configured + retention set\n- [ ] One manual backup verified in B2\n- [ ] (Optional) Backup failure notification automation added\n\n---\n","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-29T13:21:33.508045-05:00","updated_at":"2025-12-29T15:53:46.926184-05:00","deleted_at":"2025-12-29T15:53:46.926184-05:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"home-assistant-ftl","title":"matter devices not connected","description":"severl matter devices are not connected. can you look into this? am i going to have to re-add everything because the home-assistant ip address changed?","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-29T17:45:15.907114-05:00","updated_at":"2025-12-29T20:09:36.978744-05:00","closed_at":"2025-12-29T20:09:36.978744-05:00","close_reason":"Matter devices restored after changing Thread hub device. All 9 devices verified working: Living Room Light, Bathroom Lamp, Smart Button, Bedside button, Kitchen counter switch, Nuki Smart Lock, Bathroom Presence Sensor, Laundry Room Switch, Living Room Overhead Thread."}
{"id":"home-assistant-gct","title":"take advantage of nas for backups","description":"i have a newly aquired machine i am setting up as a nas. instead of writing backups to local storage, let us mount the nas via nfs (w/ autofs if possible) and configure backups to land there.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T09:47:28.747014-05:00","created_by":"john.allen","updated_at":"2026-01-08T11:01:09.299127-05:00","closed_at":"2026-01-08T11:01:09.299127-05:00","close_reason":"NFS backup to NAS configured successfully. Mount: nas_backups -\u003e 192.168.5.20:/mnt/storage/backups/homeassistant. Automatic backups now landing on NAS."}
{"id":"home-assistant-gho","title":"Air quality dashboard tab and improved alert values","description":"1. Add Air Quality tab to mobile dashboard (dashboard_bubbles) with ALPSTUGA sensor data (overall quality, PM2.5, CO2, temp, humidity) and Airversa purifier status. 2. Update cooking_air_quality_monitor automation to include actual PM2.5 and CO2 values in notifications.","status":"closed","priority":2,"issue_type":"feature","owner":"john@threedogconsulting.com","created_at":"2026-02-14T16:00:17.40523-05:00","created_by":"John Allen","updated_at":"2026-02-14T16:22:42.509307-05:00","closed_at":"2026-02-14T16:22:42.509307-05:00","close_reason":"Added Air Quality tab to mobile dashboard with ApexCharts graphs (PM2.5, CO2 with threshold zones, multi-room temps + outdoor). Updated cooking air quality automation to include PM2.5 and CO2 values in notifications. Installed apexcharts-card via HACS."}
{"id":"home-assistant-hdf","title":"Eating mode should bypass presence lighting controls","description":"When eating_mode is enabled:\n- Presence lost should NOT turn off kitchen/dining lights\n- TV turning on should NOT turn off eating lights\n\nSimilar to how cooking_mode and bathing_mode work - a mode that overrides presence detection.","status":"closed","priority":2,"issue_type":"feature","owner":"john@threedogconsulting.com","created_at":"2026-01-31T14:33:39.607996-05:00","created_by":"John Allen","updated_at":"2026-01-31T15:48:38.889601-05:00","closed_at":"2026-01-31T15:48:38.889601-05:00","close_reason":"Created dad_eating_mode helper and automation. Eat button now toggles living room eating scene with presence/TV bypass protection."}
{"id":"home-assistant-hq1","title":"ember notifications when pouring","description":"\nI have recently noticed that while i am pouring coffee into my ember mug i am getting a notification as i pour. in reality this is the mug detecting the hot liquid and notification as the temp rises. is there a way we can avoid notifications during this rapid change period?\n","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-24T10:57:53.746692-05:00","updated_at":"2026-01-03T10:43:17.41478-05:00","closed_at":"2026-01-03T10:43:17.41478-05:00","close_reason":"this has not occurred recently"}
{"id":"home-assistant-hrn","title":"air purifier failed to start","description":"i went out last night and the air purifier turned off as expected. however when i returned it did not turn on and therefor did not trigger a \"purge\".","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-22T09:01:40.955046-05:00","updated_at":"2025-12-22T09:04:42.559569-05:00","closed_at":"2025-12-22T09:04:42.559569-05:00","close_reason":"Fixed with Bluetooth retry logic - 10s initial delay + 3 retry attempts"}
{"id":"home-assistant-hyk","title":"shapes automation","description":"either add new or extend existing shapes related automation:\n\nwhen charlie is home (presence helper)\n- set \"sundown\" effect at actual sundown\n- set \"morning sky\" effect at 7am\n- set \"hip hop\" effect at noon","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-21T13:55:54.668237-05:00","updated_at":"2025-12-21T13:59:00.097061-05:00","closed_at":"2025-12-21T13:59:00.097061-05:00","close_reason":"Created time-based shapes effect automation: Sundown at sunset, Morning Sky at 7am, Hip Hop at noon"}
{"id":"home-assistant-i5w","title":"presence delay adjustment","description":"I have several automation on departure of zones. Each of them has a slightly different delay before it turns off lights. Can we make a helper and use that value for all of them? Set it to 5s by default","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-20T09:22:24.846693-05:00","updated_at":"2025-12-20T09:48:11.181396-05:00","closed_at":"2025-12-20T09:48:11.181396-05:00","close_reason":"Created input_number.presence_delay helper (default 5s) and updated kitchen, bathroom, and laundry presence automations to use it"}
{"id":"home-assistant-iqh","title":"Cooking state","description":"There is a gap in coverage in my kitchen zone. When I'm standing at my oven I'm outside of the zone. This causes issues for me - I'm preparing a meal and the lights go out. This is the primary reason for the 30s delay on kitchen absence. 30s does not appear to be long enough but I don't think the solution is to keep extending the timeout. I'm now thinking I need a helper to store state. Something like:\n\n- toggle \"cooking\" scene (maybe this needs to be script or automation)\n- set a helper to track that I'm in this state\n- update \"leaving kitchen\" to respect this, leave lights alone\n- update \"leaving charlie meal\" to respect this, leave lights alone\n- add a method for me to indicate I'm \"done cooking\"\n- reset helper to off state\n\nReview existing scripts, automations etc and build out a complete plan.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-19T18:57:31.599303-05:00","updated_at":"2025-12-19T19:08:55.883264-05:00","closed_at":"2025-12-19T19:08:55.883264-05:00","close_reason":"Implemented cooking mode feature with input_boolean helper, toggle script, and updated kitchen presence automation to respect cooking mode"}
{"id":"home-assistant-j57","title":"Add kitchen temperature to mobile dashboard","description":"Add ALPSTUGA air quality monitor temperature sensor to the Kitchen separator sub_buttons on the mobile (bubbles) dashboard, matching the pattern used by Bathroom and Laundry Room.","status":"closed","priority":2,"issue_type":"task","owner":"john@threedogconsulting.com","created_at":"2026-02-08T14:59:15.594106-05:00","created_by":"John Allen","updated_at":"2026-02-08T14:59:23.142225-05:00","closed_at":"2026-02-08T14:59:23.142225-05:00","close_reason":"Added temperature sub_button to Kitchen separator on mobile dashboard, deployed to HA"}
{"id":"home-assistant-jqc","title":"Create a lock down automation","description":"Give me some ideas for what I might want to do in an automation to lock down my place as I go to sleep.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-19T17:03:55.896053-05:00","updated_at":"2025-12-19T17:15:08.906965-05:00","closed_at":"2025-12-19T17:15:08.906965-05:00","close_reason":"Implemented lock_down script and updated bedroom button long-press to trigger it"}
{"id":"home-assistant-khe","title":"couple bedroom lights to bathroom presence","description":"i would like to couple the dads bedroom lights to dads bathroom presence because i do not have presence detection in the bedroom.\n\n- when \"alarm\" (helper) is enabled do not control bedroom lights\n- when \"alram\" (helper) is disabled _do_ control bedroom lights\n","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-04T12:33:24.552179-05:00","created_by":"john.allen","updated_at":"2026-01-04T12:40:24.833878-05:00","closed_at":"2026-01-04T12:40:24.833878-05:00","close_reason":"Created automation bedroom_bathroom_presence.yaml that couples Dad's bedroom lights to bathroom presence sensor. When alarm_enabled is off, bedroom lights turn on/off with bathroom presence.","comments":[{"id":3,"issue_id":"home-assistant-khe","author":"john.allen","text":"Additional work completed in this session:\n\n1. Bedroom-bathroom presence coupling - Created config/automations/bedroom_bathroom_presence.yaml that turns on bedroom lights when bathroom presence detected (when alarm disabled)\n\n2. Entity rename - Renamed binary_sensor.bathroom_motion to binary_sensor.laundry_room_motion_hue to avoid confusion (the Hue motion sensor was moved to laundry room)\n\n3. Dashboard update - Added Occupancy section to desktop dashboard showing presence status for Kitchen, Living room, Bathroom, Laundry room, and Charlie meal zone\n\n4. Sensor investigation - Bathroom presence sensor (Aqara) occasionally gets stuck on. Hold time is 10s, sensitivity is standard. May need physical repositioning or further debugging in future.","created_at":"2026-01-04T19:34:42Z"}]}
{"id":"home-assistant-kpc","title":"kitchen presence override","description":"The automation around kitchen presence should not reset the lights if they are already on. e.g. i set the \"cooking\" scene by voice then step into the kitchen. the presence automation shouldn't reset the already bright lights.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-19T11:38:43.058278-05:00","updated_at":"2025-12-19T11:45:04.724616-05:00","closed_at":"2025-12-19T11:45:04.724616-05:00","close_reason":"Added condition to skip adaptive lighting if kitchen lights are already on. Now presence automation only activates lights when they're off, preserving manual scenes like Cooking."}
{"id":"home-assistant-l6i","title":"meditation time","description":"I want to set up a new toggle, similar to cooking toggle i guess. it should be called toggle meditation and the following things should happen:\n\non activation:\n- turn off lights in dads bedroom\n- turn off lights in dads bathroom\n- turn off lights in living room\n- turn off lights in kitchen; except, do not turn off island bulb if presence in meal zone\n- disable living room presence automation\non deactivation:\n- enable living room presence automation\n\nthis toggle should be exposed to homekit\n","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-20T09:26:10.773624-05:00","updated_at":"2025-12-20T15:41:18.519451-05:00","closed_at":"2025-12-20T15:41:18.519451-05:00","close_reason":"Implemented meditation mode toggle with all required functionality"}
{"id":"home-assistant-lmr","title":"add roborock automation to clean dads bathroom","description":"if possible create a script/automation that will tell the roborock to clean dads bathroom. add it trigger to mobile dashoboard. name it \"done shaving\"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T10:32:46.643388-05:00","updated_at":"2025-12-22T10:43:27.363565-05:00","closed_at":"2025-12-22T10:43:27.363565-05:00","close_reason":"Created done_shaving script and added button to mobile dashboard"}
{"id":"home-assistant-lrl","title":"Kitchen button automation fires on device reconnect","description":"Kitchen Button automation (automation.kitchen_button) triggers on device availability changes (unavailable→unknown) because the state trigger on event.smart_button_button has no from/to filters. The stale event_type attribute (multi_press_1) from the last real press causes it to match the single-press condition and toggle cooking mode unexpectedly. Fix: add not_from/not_to filters to exclude unavailable/unknown transitions.","status":"closed","priority":1,"issue_type":"bug","owner":"john@threedogconsulting.com","created_at":"2026-02-08T15:25:04.767534-05:00","created_by":"John Allen","updated_at":"2026-02-08T15:25:45.471683-05:00","closed_at":"2026-02-08T15:25:45.471683-05:00","close_reason":"Added not_from/not_to filters for unknown/unavailable states to the kitchen button trigger. Device reconnects no longer fire the automation. Deployed and verified on server."}
{"id":"home-assistant-ocv","title":"Charlie Shapes Kiosk Dashboard","description":"Create a simple dashboard for Charlie's phone with just Nanoleaf Shapes on/off and effects. Configure companion app in kiosk mode to lock to this dashboard.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-31T13:58:46.679695-05:00","created_by":"john.allen","updated_at":"2025-12-31T14:00:24.358794-05:00","closed_at":"2025-12-31T14:00:24.358794-05:00","close_reason":"Created charlie-shapes dashboard and kiosk setup instructions"}
{"id":"home-assistant-ox6","title":"ember mug automation","description":"my automation that alerts me when my ember mug is \"in the zone\" has a syntax error.\n\nautomation name: Coffee Ready Zone Notification\nerror: Triggers: expected float for dictionary value @ data['below']","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-20T09:20:37.408734-05:00","updated_at":"2025-12-20T09:31:47.113398-05:00","closed_at":"2025-12-20T09:31:47.113398-05:00","close_reason":"Fixed syntax error: replaced numeric_state triggers (which don't support Jinja templates for above/below) with a template trigger that dynamically evaluates the ±3°F zone condition."}
{"id":"home-assistant-r1r","title":"cooking overriden by charlie meal","description":"if i have cooking toggled on and charlie moves into his meal zone the lighting on the island bulb changes. this should not be the case, cooking should take priority","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-21T08:40:01.363028-05:00","updated_at":"2025-12-21T11:16:37.968184-05:00","closed_at":"2025-12-21T11:16:37.968184-05:00","close_reason":"Added condition to skip charlie_meal_presence_lighting when cooking_mode is on"}
{"id":"home-assistant-r7o","title":"add sleeping toggle on dashboard","description":"the mobile dashboard should have a toggle for the sleeping (or is it lock down) helper associated with dads bedroom","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-30T13:41:55.062514-05:00","updated_at":"2025-12-30T13:48:49.193912-05:00","closed_at":"2025-12-30T13:48:49.193912-05:00","close_reason":"Added alarm_enabled toggle to Dad's Bedroom section on mobile dashboard"}
{"id":"home-assistant-rsk","title":"consider icloud3 for presence","description":"would this work for or help with auto-unlock front door? https://github.com/gcobb321/icloud3","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-05T12:08:29.041287-05:00","created_by":"john.allen","updated_at":"2026-01-05T12:08:29.041287-05:00"}
{"id":"home-assistant-s53","title":"Fix lighting issues: TV mode kitchen protection, dad eating OFF behavior, eating overhead removal","status":"closed","priority":1,"issue_type":"bug","owner":"john@threedogconsulting.com","created_at":"2026-02-14T19:03:45.550919-05:00","created_by":"John Allen","updated_at":"2026-02-14T19:03:50.524378-05:00","closed_at":"2026-02-14T19:03:50.524378-05:00","close_reason":"Fixed 3 issues: (1) TV mode now checks kitchen presence sensor so lights stay on when someone is in kitchen, (2) dad eating OFF now simply turns off living room lights instead of switching to adaptive brightness, (3) removed overhead light from eating script - floor lamp only. Also cleaned up duplicate dad_eating automation on server and synced local ID."}
{"id":"home-assistant-w6j","title":"check out \"go hass agent\"","description":"https://github.com/joshuar/go-hass-agent","notes":"## Research Summary (2026-02-11)\n\n**go-hass-agent** (v14.7.0, actively maintained) is a native HA companion app for Linux machines — the desktop/server equivalent of the mobile companion app. It registers as a `mobile_app` device and reports system sensors to HA via the Native App Integration API, with optional MQTT for device controls.\n\n### Key Capabilities\n- **Sensors**: CPU (load, usage, per-core freq), memory, disk (usage, I/O rates, S.M.A.R.T.), network (state, transfer rates, Wi-Fi), battery, uptime, kernel version, hardware sensors (temp/fan via hwmon)\n- **Controls (via MQTT)**: Reboot, shutdown, suspend, screen lock, volume control, custom commands (buttons/switches/sliders via commands.toml)\n- **Custom script sensors**: Any script (bash/python/etc) outputting JSON/YAML/TOML on a cron schedule becomes an HA sensor\n- **Events**: Fires HA events for user login/logout, OOM kills\n- **Deployment**: Docker (ghcr.io/joshuar/go-hass-agent), .deb/.rpm packages, or systemd user service. Headless registration supported via CLI.\n- **Platform**: Linux only (amd64, arm64, armv6/v7)\n\n### Homelab Hosts (candidates for deployment)\n\n| Host | Device | IP | Current Monitoring | Good Candidate? |\n|------|--------|----|--------------------|-----------------|\n| pi-01 | Pi 4 (8GB) | 192.168.5.11 | Beszel agent | Yes — infrastructure hub (Caddy, Cloudflared, Beszel, outage detector) |\n| pi-02 | Pi 4 (8GB) | 192.168.5.12 | Beszel agent | Yes — DNS (AdGuard primary), Glance dashboard |\n| pi-03 | Pi 5 (8GB) | 192.168.5.13 | Beszel agent | Yes — heaviest workload (Sonarr, Radarr, Paperless, Plex, etc.) |\n| nas | Beelink ME Mini (12GB) | 192.168.5.20 | Beszel agent | Yes — storage monitoring (mergerfs, S.M.A.R.T., Jellyfin, Immich) |\n| homeassistant | Pi 5 (8GB) | 192.168.5.10 | Built-in HA OS metrics | Maybe — HA OS already reports some metrics, but agent adds more |\n\n### Overlap with Beszel\n\nBeszel already collects CPU/memory/disk metrics from all hosts via its agent. The key difference:\n- **Beszel**: Standalone monitoring dashboard with historical data. Metrics live in Beszel only.\n- **go-hass-agent**: Metrics become native HA entities → can trigger automations, appear on HA dashboards, be queried by voice assistant, drive scripts.\n\ngo-hass-agent doesn't replace Beszel — it brings host metrics *into the HA automation engine*.\n\n### Use Cases for This Setup\n\n**1. Host Health Automations**\n- Alert (push notification, TTS) when any host's CPU sustained \u003e90%, memory \u003e85%, or disk \u003e90%\n- Pi-03 is the busiest host — monitor for resource exhaustion when Plex transcoding + Paperless OCR + Sonarr imports overlap\n- NAS mergerfs pool approaching capacity → notification before it fills up\n\n**2. Remote Power Management (via MQTT)**\n- Reboot any Pi or the NAS from an HA dashboard or voice command\n- \"Hey Siri, reboot pi-03\" (via HomeKit-exposed script that calls HA service)\n- Emergency shutdown automation if a host reports dangerously high CPU temp (hwmon sensor)\n\n**3. Custom Script Sensors (the killer feature)**\n- **Outage detector status**: Script on pi-01 that queries the SQLite DB and reports current connectivity state + last outage duration as HA sensors\n- **Docker container count**: Script reporting running/stopped container counts per host\n- **Backup verification**: Script on NAS checking if today's HA backup exists in the B2-synced directory\n- **AdGuard stats**: Script exposing query count, blocked %, top blocked domain as HA sensors\n- **mergerfs health**: Script reporting individual disk usage within the merged pool (disk1 vs disk2 balance)\n\n**4. Storage Monitoring**\n- S.M.A.R.T. status for NAS NVMe drives → alert on pre-failure indicators\n- Disk I/O rate monitoring on pi-03 (heaviest I/O from media operations)\n- Track NVMe wear level on the homeassistant Pi 5's boot drive\n\n**5. Network Quality Dashboard**\n- Per-host network transfer rates in HA → identify bandwidth hogs\n- Network interface state changes → know immediately when a host drops off the network\n- Combine with outage detector data for comprehensive network health view\n\n**6. Operational Awareness**\n- Uptime sensors for all hosts on a single HA dashboard card\n- Kernel version tracking → know when hosts need updates\n- OOM kill events → immediate notification when a service crashes from memory pressure (especially relevant for pi-03 with many services)\n\n### Deployment Strategy\n\nDocker is the cleanest option given the existing docker-compose workflow:\n1. Add `go-hass-agent/docker-compose.yml` to each host in pi-cielo\n2. Register via one-shot container (`go-hass-agent register --server https://homeassistant:8123 --token TOKEN`)\n3. Run persistent container with /proc, /sys, /run/dbus mounts\n4. Optionally configure MQTT (requires HA MQTT integration — check if already set up)\n5. Deploy custom script sensors for host-specific data (outage detector on pi-01, mergerfs on nas, etc.)\n\n### Considerations\n- **Resource overhead**: Lightweight Go binary, minimal CPU/memory footprint — fine for Pi 4/5\n- **MQTT requirement for controls**: Need an MQTT broker (Mosquitto addon or external). If not already running, this is extra infra. Controls are optional though — sensors work without MQTT.\n- **HA OS on homeassistant host**: Can't run Docker containers directly on HA OS. Would need to use the HA addon system or skip this host (it already has built-in system monitoring).\n- **Maintenance**: Watchtower already auto-updates containers on all hosts, so go-hass-agent would stay current automatically.\n\n### Recommendation\n\nStart with **pi-03** (busiest host, most to monitor) and **nas** (storage health is critical). These provide the highest value. Add pi-01 and pi-02 later if the pattern proves useful. Skip homeassistant (HA OS limitations).\n\nThe custom script sensor capability is the real differentiator vs just using Beszel — it lets you turn *anything scriptable* into an HA entity with automations attached.","status":"open","priority":2,"issue_type":"feature","owner":"john@threedogconsulting.com","created_at":"2026-02-11T10:59:02.668025-05:00","created_by":"John Allen","updated_at":"2026-02-11T11:03:55.508172-05:00"}
{"id":"home-assistant-x63","title":"add desciptors too arr bookmarks","description":"in the glance dashboard add labels e.g. (tv) next to arr related bookmarks","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:50:34.778287-05:00","created_by":"john.allen","updated_at":"2026-01-02T12:29:20.750099-05:00","closed_at":"2026-01-02T12:29:20.750099-05:00","close_reason":"wrong repo"}
{"id":"home-assistant-xj4","title":"Look into connecting Airversa AP2 to Home Assistant","description":"Research integration options for the Airversa AP2 air purifier/monitor. Check if there's a native HA integration, HACS component, or if it supports HomeKit/Matter/local API.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-19T17:02:21.155621-05:00","updated_at":"2025-12-21T11:25:42.893937-05:00","closed_at":"2025-12-21T11:25:42.893937-05:00","close_reason":"Closed"}
{"id":"home-assistant-yl4","title":"inetrations/devices down","description":"i have swapped out a router that was failing. since doing so several integrations/devices are not coming back up. it appears that these had hard-coded ip addresses.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-29T16:17:14.049043-05:00","updated_at":"2025-12-29T17:21:06.252422-05:00","closed_at":"2025-12-29T17:21:06.252422-05:00","close_reason":"Resolved after router swap. Hue bridge, Apple TV, and Airversa recovered after device restarts got them on correct subnet (192.168.5.x). User manually removed stale integrations (Archer AX1800, Scrypted, old AdGuard). Provided info on eero custom integration as optional enhancement."}
